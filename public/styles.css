:root{
    --bg: #f6f7fb;
    --card: #fff;
    --accent: #2d85a6;
    --accent-2: #3aa0c9;
    --other-bubble: #eef3fb;
    --text: #0f1720;
    --muted: #6b7280;
    --max-width: 78%;
    --gap: 10px;
    --radius: 18px;
    --shadow: 0 6px 18px rgba(18,24,33,0.06);
  }
  
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing:antialiased; color:var(--text); background:var(--bg);}
  
  #app{display:flex;flex-direction:column;height:100vh;}
  
  /* Topbar */
  .topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:linear-gradient(180deg,var(--accent-2),var(--accent));color:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
  .topbar .title{font-size:17px;font-weight:700;letter-spacing:0.1px}
  .topbar .subtitle{font-size:12px;opacity:0.95;margin-top:2px}
  .topbar-left, .topbar-right{width:44px;display:flex;align-items:center;justify-content:center}
  .topbar-center{flex:1;text-align:center}
  
  /* Icon button */
  .icon-btn{background:transparent;border:none;color:inherit;padding:6px;border-radius:10px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}
  .icon-btn:active{transform:scale(0.98)}
  .icon-btn svg{fill:currentColor;stroke:currentColor}
  
  /* Chat */
  #chat-container{flex:1;overflow:auto;padding:14px 12px;display:flex;flex-direction:column}
  #chat{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:var(--gap)}
  
  /* Day separator (not added by client by default, can be inserted) */
  .day-sep{
    align-self:center;
    padding:6px 10px;
    font-size:12px;
    color:var(--muted);
    background:linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.3));
    border-radius:999px;
    box-shadow:var(--shadow);
  }
  
  /* Message common */
  .message{
    display:block;
    position:relative;
    max-width:var(--max-width);
    padding:10px 14px;
    border-radius:var(--radius);
    font-size:15px;
    line-height:1.35;
    word-break:break-word;
    box-shadow:var(--shadow);
    transition:transform .12s ease, opacity .12s ease;
  }
  
  /* text and meta */
  .message .text{white-space:pre-wrap}
  .message .meta{display:block;font-size:11px;color:var(--muted);margin-top:8px;opacity:0.9}
  
  /* RECEIVED (others) - left */
  .message.received{
    align-self:flex-start;
    background:var(--other-bubble);
    color:var(--text);
    border-bottom-left-radius:6px;
    transform-origin:left center;
  }
  
  /* small avatar circle (styled via pseudo element) */
  .message.received::before{
    content: '';
    position: absolute;
    left: -36px;
    top: 8px;
    width:32px;
    height:32px;
    border-radius:50%;
    background:linear-gradient(135deg,#9fb9c6,#6ea0b5);
    box-shadow:0 2px 6px rgba(0,0,0,0.08);
  }
  
  /* little tail */
  .message.received::after{
    content:'';
    position:absolute;
    left:-8px;
    bottom:10px;
    width:0;height:0;
    border-top:8px solid transparent;
    border-right:8px solid var(--other-bubble);
    border-bottom:8px solid transparent;
  }
  
  /* SENT (you) - right */
  .message.sent{
    align-self:flex-end;
    background:linear-gradient(180deg,var(--accent), var(--accent-2));
    color:#fff;
    border-bottom-right-radius:6px;
    transform-origin:right center;
  }
  
  /* small avatar on right */
  .message.sent::before{
    content: '';
    position: absolute;
    right: -36px;
    top: 8px;
    width:32px;
    height:32px;
    border-radius:50%;
    background:linear-gradient(135deg,#245e6a,#2d85a6);
    box-shadow:0 2px 6px rgba(0,0,0,0.12);
  }
  
  /* tail on right */
  .message.sent::after{
    content:'';
    position:absolute;
    right:-8px;
    bottom:10px;
    width:0;height:0;
    border-top:8px solid transparent;
    border-left:8px solid rgba(255,255,255,0.06); /* subtle */
    border-bottom:8px solid transparent;
  }
  
  /* sending state */
  .message.sending{opacity:0.85;filter:saturate(0.95);transform:translateY(3px)}
  
  /* Composer */
  #composer{
    display:flex;
    gap:8px;
    padding:10px;
    border-top:1px solid rgba(2,6,23,0.04);
    background: #fff;
    align-items:flex-end;
  }
  
  .composer-left, .composer-right{display:flex;align-items:center}
  .composer-left{margin-left:4px}
  .composer-right{margin-right:4px}
  
  /* Textarea */
  #msg{
    flex:1;
    min-height:44px;
    max-height:140px;
    padding:10px 12px;
    border-radius:12px;
    border:1px solid #e6edf3;
    font-size:16px;
    line-height:1.3;
    resize:none;
    overflow:auto;
    background:linear-gradient(180deg,#fff,#fbfdff);
    color:var(--text);
    transition:box-shadow .12s ease,border-color .12s ease;
  }
  #msg:focus{outline:none;box-shadow:0 6px 20px rgba(45,133,166,0.12);border-color:var(--accent-2)}
  
  /* Send */
  #send{
    border:none;
    background:var(--accent);
    color:#fff;
    font-weight:700;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    box-shadow:0 6px 14px rgba(45,133,166,0.18);
  }
  #send:disabled{
    background:#c7dfe6;
    cursor:default;
    box-shadow:none;
  }
  
  /* Typing indicator */
  .typing{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:18px;color:var(--muted);font-size:13px;align-self:flex-start;margin-top:6px;opacity:0;transition:opacity .12s ease;pointer-events:none}
  .typing.visible{opacity:1}
  .typing .dot{width:7px;height:7px;background:var(--muted);border-radius:50%;animation:dot 1s infinite}
  .typing .dot:nth-child(2){animation-delay:.15s}
  .typing .dot:nth-child(3){animation-delay:.3s}
  @keyframes dot{0%{transform:translateY(0)}50%{transform:translateY(-5px)}100%{transform:translateY(0)}}
  
  /* small responsive tweaks */
  @media (max-width:600px){
    :root{--max-width:88%}
    .topbar .title{font-size:15px}
    .topbar .subtitle{font-size:11px}
    #msg{font-size:16px}
    .message{font-size:16px}
  }
  